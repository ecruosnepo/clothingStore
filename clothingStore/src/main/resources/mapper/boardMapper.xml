<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.store.dao.BoardDao">
	<select id="boardListAllDao" resultType="com.store.dto.BoardDto"> 
		select id,b_check,user_email,title,boardCat,regDate from board 
		<if test='keyword != null'>
		 	where user_email like #{keyword}
		</if>
		order by regDate DESC
	</select>
	
	<select id="boardListDao" resultType="com.store.dto.BoardDto"> 
		select id,b_check,user_email,title,boardCat,regDate from board where user_email=#{user_email} order by regDate DESC
	</select>
	
	<insert id="boardWriteDao">
		insert into board (b_check,user_email,title,question,boardCat,file,orderId,regDate)
		values (#{b_check},#{user_email},#{title},#{question},#{boardCat},#{file},#{orderId},now())
	</insert>
	
	<select id="boardViewDao" resultType="com.store.dto.BoardDto"> 
		select * from board where id=#{id}
	</select>
	
	<select id="boardListCountDao" resultType="_int">
		select count(*) from board
		<if test='search != null'>
			where user_email like #{search}
		</if>
	</select>
	 
	<delete id="boardDeleteListDao">
		delete from board where id=#{id}
	</delete>
	
	<update id="boardUpdateDao" > 
		update board set title=#{title}, question=#{question}, boardCat=#{boardCat}, file=#{fileName}, orderId=#{orderId}, regDate=now() WHERE id=#{id}
	</update> 
	
	<select id="boardFileNameListDao" resultType="String">
		select file from board
	</select>
	
	<update id="boardAnswerUpdate" > 
		update board set b_check=1, answer=#{answer} WHERE id=#{id}
	</update> 
</mapper>

