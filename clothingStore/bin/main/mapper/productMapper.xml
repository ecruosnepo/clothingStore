<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.store.dao.ProductDao">
	<!-- 상품 목록 -->
	<select id="listProductDao" resultType="com.store.dto.ProductDto">
		select pd_id, pd_name, cat_id, pd_price, pd_img, pd_regdate from products where cat_id=#{0} order by pd_id desc;
	</select>
	
	<!-- 상품 상세 -->
	<select id="viewProductDao" resultType="com.store.dto.ProductDto">
		select * from products where pd_id=#{0};
	</select>
	
	<!-- 색상 목록 -->
	<select id="getColorListDao" resultType="com.store.dto.ProductDto">
		select pd_id, pd_name, pd_img, pd_color from products where pd_name=#{0};
	</select>
	
	<!-- 상품 등록 -->
	<insert id="regProductDao" parameterType="hashMap">
		insert into products (pd_name, pd_price, pd_color, pd_desc, cat_id, discount, pd_img) values (#{pd_name}, #{pd_price}, #{pd_color}, #{pd_desc}, #{cat_id}, #{discount}, #{pd_img});
	</insert>
	
	<!-- 상품 제거 -->
	<delete id="deleteProductDao">
		delete from products where id=#{0};
	</delete>
	
	<!-- 상품 수정 -->
	<update id="updateProductDao">
		update products set pd_model=#{pd_model}, pd_name=#{pd_name}, pd_price=#{pd_price}, pd_size=#{pd_size}, pd_color=#{pd_color}, pd_desc=#{pd_desc}, cat_id=#{cat_id}, discount=#{discount}, pd_img=#{pd_img}, pd_stock=#{pd_stock} where pd_id=#{pd_id};
	</update>
</mapper>
